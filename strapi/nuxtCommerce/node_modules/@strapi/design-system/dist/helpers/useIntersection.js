import { useEffect as m } from "react";
import { useCallbackRef as p } from "@radix-ui/react-use-callback-ref";
const E = (t, i, { selectorToWatch: n, skipWhen: r = !1 }) => {
  const e = p(i);
  m(() => {
    if (r)
      return;
    const s = {
      root: t.current,
      rootMargin: "0px"
    }, u = (g) => {
      g.forEach((c) => {
        c.isIntersecting && t.current.scrollHeight > t.current.clientHeight && e(c);
      });
    }, o = new IntersectionObserver(u, s), f = t.current.querySelector(n);
    return o.observe(f), () => {
      o.disconnect();
    };
  }, [r, e, n, t]);
};
export {
  E as useIntersection
};
