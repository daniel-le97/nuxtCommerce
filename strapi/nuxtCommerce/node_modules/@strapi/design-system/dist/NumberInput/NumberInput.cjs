"use strict";var W=Object.defineProperty;var m=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var N=(e,n,a)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,E=(e,n)=>{for(var a in n||(n={}))j.call(n,a)&&N(e,a,n[a]);if(m)for(var a of m(n))w.call(n,a)&&N(e,a,n[a]);return e};var k=(e,n)=>{var a={};for(var u in e)j.call(e,u)&&n.indexOf(u)<0&&(a[u]=e[u]);if(e!=null&&m)for(var u of m(e))n.indexOf(u)<0&&w.call(e,u)&&(a[u]=e[u]);return a};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("react"),X=require("prop-types"),Y=require("styled-components"),G=require("@strapi/icons/CarretDown"),D=require("@internationalized/number"),J=require("../Field/Field.cjs"),Q=require("../Field/FieldLabel.cjs"),Z=require("../Field/FieldInput.cjs"),ee=require("../Field/FieldHint.cjs"),te=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const re=require("../Stack/Stack.cjs"),C=require("../Icon/Icon.cjs"),ae=require("../themes/sizes.cjs"),ne=require("../helpers/useId.cjs"),A=require("../helpers/keyboardKeys.cjs"),le=require("../helpers/getDefaultLocale.cjs"),oe=require("../hooks/useControllableState.cjs"),p=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},l=p(g),r=p(X),ue=p(Y),S=p(G),_=ue.default.button`
  display: flex;
  height: 1rem;
  align-items: ${({reverse:e})=>e?"flex-end":"flex-start"};
  transform: translateY(${({reverse:e})=>e?"-2px":"2px"});
  cursor: ${({disabled:e})=>e?"not-allowed":void 0};
  svg {
    display: block;
    height: ${4/16}rem;
    transform: ${({reverse:e})=>e?"rotateX(180deg)":void 0};
  }
`,se="",b=l.default.forwardRef((ie,T)=>{var q=ie,{size:e,startAction:n,name:a,hint:u,error:V,label:F,labelAction:x,locale:L,id:P,onValueChange:R,value:K,step:i,required:z,disabled:f}=q,O=k(q,["size","startAction","name","hint","error","label","labelAction","locale","id","onValueChange","value","step","required","disabled"]);const $=ne.useId("numberinput",P),h=L||le.getDefaultLocale(),c=g.useRef(new D.NumberParser(h,{style:"decimal"})),y=g.useRef(new D.NumberFormatter(h,{maximumFractionDigits:20})),[s,B]=oe.useControllableState({prop(t){const o=String(K);return isNaN(o)||o!==t&&t!==""?t:o},defaultProp:se,onChange(t){const o=c.current.parse(t);R(isNaN(o)?void 0:o)}}),d=t=>{B(String(t))},H=({target:{value:t}})=>{c.current.isValidPartialNumber(t)&&d(t)},v=()=>{if(!s){d(i);return}const t=c.current.parse(s),o=isNaN(t)?i:t+i;d(y.current.format(o))},I=()=>{if(!s){d(-i);return}const t=c.current.parse(s),o=isNaN(t)?-i:t-i;d(y.current.format(o))},M=t=>{if(!f)switch(t.key){case A.KeyboardKeys.DOWN:{t.preventDefault(),I();break}case A.KeyboardKeys.UP:{t.preventDefault(),v();break}}},U=()=>{if(s){const t=c.current.parse(s),o=isNaN(t)?"":y.current.format(t);d(o)}};return l.default.createElement(J.Field,{name:a,hint:u,error:V,id:$,required:z},l.default.createElement(re.Stack,{spacing:1},F&&l.default.createElement(Q.FieldLabel,{action:x},F),l.default.createElement(Z.FieldInput,E({ref:T,startAction:n,disabled:f,type:"text",inputmode:"decimal",onChange:H,onKeyDown:M,onBlur:U,value:s,size:e,endAction:l.default.createElement(l.default.Fragment,null,l.default.createElement(_,{disabled:f,"aria-hidden":!0,reverse:!0,onClick:v,tabIndex:-1,type:"button","data-testid":"ArrowUp"},l.default.createElement(C.Icon,{as:S.default,color:"neutral500"})),l.default.createElement(_,{disabled:f,"aria-hidden":!0,onClick:I,tabIndex:-1,type:"button","data-testid":"ArrowDown"},l.default.createElement(C.Icon,{as:S.default,color:"neutral500"})))},O)),l.default.createElement(ee.FieldHint,null),l.default.createElement(te.FieldError,null)))});b.displayName="NumberInput";b.defaultProps={"aria-label":void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:void 0,labelAction:void 0,locale:void 0,required:!1,size:"M",startAction:void 0,step:1,value:void 0};b.propTypes={"aria-label":r.default.string,disabled:r.default.bool,error:r.default.string,hint:r.default.oneOfType([r.default.string,r.default.node,r.default.arrayOf(r.default.node)]),id:r.default.string,label:r.default.string,labelAction:r.default.element,locale:r.default.string,name:r.default.string.isRequired,onValueChange:r.default.func.isRequired,required:r.default.bool,size:r.default.oneOf(Object.keys(ae.sizes.input)),startAction:r.default.element,step:r.default.number,value:r.default.number};exports.NumberInput=b;
