"use strict";var Z=Object.defineProperty;var C=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var $=(e,r,n)=>r in e?Z(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,i=(e,r)=>{for(var n in r||(r={}))F.call(r,n)&&$(e,n,r[n]);if(C)for(var n of C(r))A.call(r,n)&&$(e,n,r[n]);return e};var D=(e,r)=>{var n={};for(var s in e)F.call(e,s)&&r.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&C)for(var s of C(e))r.indexOf(s)<0&&A.call(e,s)&&(n[s]=e[s]);return n};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("react"),ee=require("prop-types"),te=require("styled-components"),ne=require("react-router-dom"),N=require("@radix-ui/react-use-callback-ref"),oe=require("@strapi/icons/CarretDown"),I=require("../Typography/Typography.cjs"),re=require("../Link/Link.cjs"),K=require("../Box/Box.cjs"),ae=require("../Flex/Flex.cjs"),V=require("../Button/Button.cjs"),W=require("../Popover/Popover.cjs"),O=require("./utils.cjs"),se=require("../helpers/useId.cjs"),d=require("../helpers/keyboardKeys.cjs"),R=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},a=R(l),t=R(ee),v=R(te),ue=R(oe),le=v.default.button`
  border: none;
  padding: 0;
  background: transparent;
  cursor: pointer;
  ${O.getOptionStyle}
`,ce=v.default(ne.NavLink)`
  text-decoration: none;
  ${O.getOptionStyle}
`,de=v.default(re.Link)`
  /* Removing Link hover effect */
  &:hover {
    color: currentColor;
  }

  &:focus-visible {
    /* Removing Link focus-visible after properties and reset to global outline */
    outline: 2px solid ${({theme:e})=>e.colors.primary600};
    outline-offset: 2px;
    &:after {
      content: none;
    }
  }

  ${O.getOptionStyle}
`,ie=v.default.span`
  display: flex;
  align-items: center;
  svg {
    height: 4px;
    width: 6px;
  }
`,fe=v.default(V.Button)`
  padding: ${({theme:e})=>`${e.spaces[1]} ${e.spaces[3]}`};
`,S=w=>{var b=w,{children:e,onClick:r,to:n,isFocused:s,href:f}=b,P=D(b,["children","onClick","to","isFocused","href"]);const c=l.useRef();l.useEffect(()=>{s&&c.current&&c.current.focus()},[s]);const p=i({tabIndex:s?0:-1,ref:c,role:"menuitem"},P),M=y=>{(y.key===d.KeyboardKeys.SPACE||y.key===d.KeyboardKeys.ENTER)&&r()};return n&&!f?a.default.createElement(ce,i({to:n},p),a.default.createElement(K.Box,{padding:2},a.default.createElement(I.Typography,null,e))):f&&!n?a.default.createElement(de,i({isExternal:!0,href:f},p),a.default.createElement(K.Box,{padding:2},a.default.createElement(I.Typography,null,e))):a.default.createElement(le,i({onKeyDown:M,onMouseDown:r,type:"button"},p),a.default.createElement(K.Box,{padding:2},a.default.createElement(I.Typography,null,e)))};S.defaultProps={as:void 0,href:void 0,isFocused:!1,onClick(){},to:void 0};S.propTypes={as:t.default.elementType,children:t.default.node.isRequired,href:t.default.string,isFocused:t.default.bool,onClick:t.default.func,to:t.default.string};const k=M=>{var y=M,{label:e,children:r,id:n,as:s,onOpen:f=()=>{},onClose:P=()=>{},size:w,popoverPlacement:b,onReachEnd:c}=y,p=D(y,["label","children","id","as","onOpen","onClose","size","popoverPlacement","onReachEnd"]);const m=l.useRef(),T=se.useId("simplemenu",n),E=l.useRef(!1),[g,h]=l.useState(!1),[q,B]=l.useState(0),x=l.Children.toArray(r),z=w==="S"?fe:V.Button,U=s||z,j=!!c&&typeof c=="function";l.useEffect(()=>{if(["string","number"].includes(typeof e)){const o=x.findIndex(u=>u.props.children===e);o!==-1&&B(o)}},[e]);const _=N.useCallbackRef(f),L=N.useCallbackRef(P);l.useEffect(()=>{E!=null&&E.current?g?_():L():E.current=!0},[E,L,_,g]),l.useEffect(()=>{a.default.isValidElement(e)&&q===-1&&m.current.focus()},[e,q]);const H=o=>{g&&(o.key===d.KeyboardKeys.ESCAPE&&(o.stopPropagation(),h(!1),m.current.focus()),o.key===d.KeyboardKeys.DOWN&&B(u=>u===x.length-1?0:u+1),o.key===d.KeyboardKeys.UP&&B(u=>u===0?x.length-1:u-1))},G=o=>{(o.key===d.KeyboardKeys.ENTER||o.key===d.KeyboardKeys.SPACE)&&h(u=>!u)},J=o=>{o.preventDefault(),o.currentTarget.contains(o.relatedTarget)||h(!1)},Q=o=>{o.preventDefault(),h(u=>!u)},X=()=>{j&&c()},Y=x.map((o,u)=>a.default.createElement(ae.Flex,{as:"li",key:u,justifyContent:"center",role:"menuitem"},l.cloneElement(o,{onClick(){o.props.onClick(),h(!1),m.current.focus()},isFocused:q===u})));return a.default.createElement("div",{onKeyDown:H},a.default.createElement(U,i({label:a.default.isValidElement(e)?null:e,"aria-haspopup":!0,"aria-expanded":g,"aria-controls":T,onKeyDown:G,onMouseDown:Q,ref:m,type:"button",variant:"ghost",endIcon:a.default.createElement(ie,null,a.default.createElement(ue.default,{"aria-hidden":!0}))},p),e),g&&a.default.createElement(W.Popover,{onBlur:J,placement:b,source:m,onReachEnd:X,intersectionId:j?`popover-${T}`:void 0,spacing:4},a.default.createElement(K.Box,{role:"menu",as:"ul",padding:1,id:T},Y)))};k.defaultProps={as:void 0};k.displayName="SimpleMenu";k.defaultProps={id:void 0,onOpen:void 0,onClose:void 0,onReachEnd:void 0,popoverPlacement:"bottom-start",size:"M"};k.propTypes={as:t.default.any,children:t.default.oneOfType([t.default.arrayOf(t.default.node),t.default.node]).isRequired,id:t.default.string,label:t.default.oneOfType([t.default.string,t.default.number,t.default.element]).isRequired,onClose:t.default.func,onOpen:t.default.func,onReachEnd:t.default.func,popoverPlacement:t.default.oneOf(W.POPOVER_PLACEMENTS),size:t.default.oneOf(["S","M"])};exports.MenuItem=S;exports.SimpleMenu=k;
