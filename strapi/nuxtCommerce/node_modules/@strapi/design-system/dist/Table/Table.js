var S = Object.defineProperty;
var l = Object.getOwnPropertySymbols;
var p = Object.prototype.hasOwnProperty, b = Object.prototype.propertyIsEnumerable;
var u = (t, o, e) => o in t ? S(t, o, { enumerable: !0, configurable: !0, writable: !0, value: e }) : t[o] = e, g = (t, o) => {
  for (var e in o || (o = {}))
    p.call(o, e) && u(t, e, o[e]);
  if (l)
    for (var e of l(o))
      b.call(o, e) && u(t, e, o[e]);
  return t;
};
var m = (t, o) => {
  var e = {};
  for (var r in t)
    p.call(t, r) && o.indexOf(r) < 0 && (e[r] = t[r]);
  if (t != null && l)
    for (var r of l(t))
      o.indexOf(r) < 0 && b.call(t, r) && (e[r] = t[r]);
  return e;
};
import n, { useRef as k, useState as $, useEffect as v } from "react";
import c from "prop-types";
import s from "styled-components";
import { RawTable as y } from "../RawTable/RawTable.js";
import { Box as f } from "../Box/Box.js";
const E = s(f)`
  overflow: hidden;
  border: 1px solid ${({ theme: t }) => t.colors.neutral150};
`, L = s(y)`
  width: 100%;
  white-space: nowrap;
`, O = s(f)`
  position: relative;

  &:before {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(90deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({ overflowing: t }) => t === "both" || t === "left" ? "''" : void 0};
    box-shadow: ${({ theme: t }) => t.shadows.tableShadow};
    width: ${({ theme: t }) => t.spaces[2]};
    left: 0;
  }

  &:after {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(270deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({ overflowing: t }) => t === "both" || t === "right" ? "''" : void 0};
    box-shadow: ${({ theme: t }) => t.shadows.tableShadow};
    width: ${({ theme: t }) => t.spaces[2]};
    right: 0;
    top: 0;
  }
`, W = s(f)`
  overflow-x: auto;
`, w = (C) => {
  var h = C, { colCount: t, rowCount: o, footer: e } = h, r = m(h, ["colCount", "rowCount", "footer"]);
  const d = k(null), [T, i] = $(), x = (a) => {
    const R = a.target.scrollWidth - a.target.clientWidth;
    if (a.target.scrollLeft === 0) {
      i("right");
      return;
    }
    if (a.target.scrollLeft === R) {
      i("left");
      return;
    }
    a.target.scrollLeft > 0 && i("both");
  };
  return v(() => {
    d.current.scrollWidth > d.current.clientWidth && i("right");
  }, []), /* @__PURE__ */ n.createElement(E, {
    shadow: "tableShadow",
    hasRadius: !0,
    background: "neutral0"
  }, /* @__PURE__ */ n.createElement(O, {
    overflowing: T
  }, /* @__PURE__ */ n.createElement(W, {
    ref: d,
    onScroll: x,
    paddingLeft: 6,
    paddingRight: 6
  }, /* @__PURE__ */ n.createElement(L, g({
    colCount: t,
    rowCount: o
  }, r)))), e);
};
w.defaultProps = {
  footer: void 0
};
w.propTypes = {
  colCount: c.number.isRequired,
  footer: c.node,
  rowCount: c.number.isRequired
};
export {
  w as Table
};
