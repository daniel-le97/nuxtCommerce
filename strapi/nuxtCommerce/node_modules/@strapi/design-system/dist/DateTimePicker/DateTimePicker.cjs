"use strict";var B=Object.defineProperty;var F=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var $=(e,a,i)=>a in e?B(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,M=(e,a)=>{for(var i in a||(a={}))H.call(a,i)&&$(e,i,a[i]);if(F)for(var i of F(a))y.call(a,i)&&$(e,i,a[i]);return e};var I=(e,a)=>{var i={};for(var r in e)H.call(e,r)&&a.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&F)for(var r of F(e))a.indexOf(r)<0&&y.call(e,r)&&(i[r]=e[r]);return i};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=require("react"),b=require("../Stack/Stack.cjs"),G=require("../DatePicker/DatePicker.cjs"),J=require("../TimePicker/TimePicker.cjs"),K=require("../Field/Field.cjs"),N=require("../Field/FieldLabel.cjs");require("../Field/FieldInput.cjs");const Q=require("../Field/FieldHint.cjs"),U=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const h=require("../helpers/useId.cjs"),w=require("./parseDate.cjs"),_=require("./DateTimePickerProps.cjs"),W=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},l=W(p),g=X=>{var E=X,{ariaLabel:e,clearLabel:a,disabled:i,error:r,hint:L,label:m,labelAction:V,onChange:d,onClear:P,name:j,required:T,selectButtonTitle:v,size:S,step:C,value:n}=E,D=I(E,["ariaLabel","clearLabel","disabled","error","hint","label","labelAction","onChange","onClear","name","required","selectButtonTitle","size","step","value"]);const u=w.parseDate(n),[c,f]=p.useState(u),[k,o]=p.useState(u?`${u.getHours()}:${u.getMinutes()}:${u.getSeconds()}`:null),R=t=>{f(t);let s;k?(s=new Date(t),s.setHours(k.split(":")[0]),s.setMinutes(k.split(":")[1])):(s=new Date(t),o(`${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`)),d&&d(s)},x=t=>{o(t);const s=c?new Date(c):new Date;s.setHours(t.split(":")[0]),s.setMinutes(t.split(":")[1]),c||f(s),d&&d(s)},A=()=>{f(void 0),o(void 0),P()},O=()=>{o(void 0);let t;c&&(t=new Date(c),t.setHours("00"),t.setMinutes("00")),d&&d(t)};p.useEffect(()=>{if(n&&+n!=+c){const t=w.parseDate(n);f(t),o(t?`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`:null)}else n||(f(void 0),o(void 0))},[n,c]);const q=h.useId("datetime-label",D==null?void 0:D.id),z=h.useId("datetimepicker");return l.default.createElement(K.Field,{name:j,role:"group",id:q,"aria-labelledby":q,hint:L,error:r,required:T},l.default.createElement(b.Stack,{spacing:1},m&&l.default.createElement(N.FieldLabel,{action:V},m),l.default.createElement(b.Stack,{horizontal:!0,spacing:2},l.default.createElement(G.DatePicker,M({"data-testid":"datetimepicker-date",name:j,ariaLabel:m||e,error:typeof r=="string",selectedDate:c,selectedDateLabel:t=>`Date picker, current is ${t}`,onChange:R,required:T,size:S,onClear:P&&A,clearLabel:a,disabled:i},D)),l.default.createElement(J.TimePicker,{"data-testid":"datetimepicker-time",size:S,"aria-label":m||e,error:typeof r=="string",value:k,onChange:x,onClear:P&&O,clearLabel:a,required:T,selectButtonTitle:v,disabled:i,step:C})),l.default.createElement(Q.FieldHint,null),l.default.createElement(U.FieldError,{id:z})))};g.defaultProps=_.dateTimePickerDefaultProps;g.propTypes=_.dateTimePickerPropTypes;exports.DateTimePicker=g;
