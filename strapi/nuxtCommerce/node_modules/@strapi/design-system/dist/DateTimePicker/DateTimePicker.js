var G = Object.defineProperty;
var g = Object.getOwnPropertySymbols;
var M = Object.prototype.hasOwnProperty, w = Object.prototype.propertyIsEnumerable;
var H = (t, r, i) => r in t ? G(t, r, { enumerable: !0, configurable: !0, writable: !0, value: i }) : t[r] = i, y = (t, r) => {
  for (var i in r || (r = {}))
    M.call(r, i) && H(t, i, r[i]);
  if (g)
    for (var i of g(r))
      w.call(r, i) && H(t, i, r[i]);
  return t;
};
var F = (t, r) => {
  var i = {};
  for (var a in t)
    M.call(t, a) && r.indexOf(a) < 0 && (i[a] = t[a]);
  if (t != null && g)
    for (var a of g(t))
      r.indexOf(a) < 0 && w.call(t, a) && (i[a] = t[a]);
  return i;
};
import n, { useState as h, useEffect as J } from "react";
import { Stack as V } from "../Stack/Stack.js";
import { DatePicker as K } from "../DatePicker/DatePicker.js";
import { TimePicker as N } from "../TimePicker/TimePicker.js";
import { Field as O } from "../Field/Field.js";
import { FieldLabel as Q } from "../Field/FieldLabel.js";
import "../Field/FieldInput.js";
import { FieldHint as U } from "../Field/FieldHint.js";
import { FieldError as W } from "../Field/FieldError.js";
import "../Field/FieldContext.js";
import "../Field/FieldAction.js";
import { useId as I } from "../helpers/useId.js";
import { parseDate as _ } from "./parseDate.js";
import { dateTimePickerDefaultProps as X, dateTimePickerPropTypes as Y } from "./DateTimePickerProps.js";
const b = (Z) => {
  var P = Z, {
    ariaLabel: t,
    clearLabel: r,
    disabled: i,
    error: a,
    hint: v,
    label: f,
    labelAction: x,
    onChange: m,
    onClear: T,
    name: k,
    required: E,
    selectButtonTitle: C,
    size: $,
    step: L,
    value: d
  } = P, u = F(P, [
    "ariaLabel",
    "clearLabel",
    "disabled",
    "error",
    "hint",
    "label",
    "labelAction",
    "onChange",
    "onClear",
    "name",
    "required",
    "selectButtonTitle",
    "size",
    "step",
    "value"
  ]);
  const c = _(d), [s, p] = h(c), [D, l] = h(
    c ? `${c.getHours()}:${c.getMinutes()}:${c.getSeconds()}` : null
  ), R = (e) => {
    p(e);
    let o;
    D ? (o = new Date(e), o.setHours(D.split(":")[0]), o.setMinutes(D.split(":")[1])) : (o = new Date(e), l(`${o.getHours()}:${o.getMinutes()}:${o.getSeconds()}`)), m && m(o);
  }, j = (e) => {
    l(e);
    const o = s ? new Date(s) : new Date();
    o.setHours(e.split(":")[0]), o.setMinutes(e.split(":")[1]), s || p(o), m && m(o);
  }, z = () => {
    p(void 0), l(void 0), T();
  }, A = () => {
    l(void 0);
    let e;
    s && (e = new Date(s), e.setHours("00"), e.setMinutes("00")), m && m(e);
  };
  J(() => {
    if (d && +d != +s) {
      const e = _(d);
      p(e), l(
        e ? `${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}` : null
      );
    } else
      d || (p(void 0), l(void 0));
  }, [d, s]);
  const S = I("datetime-label", u == null ? void 0 : u.id), B = I("datetimepicker");
  return /* @__PURE__ */ n.createElement(O, {
    name: k,
    role: "group",
    id: S,
    "aria-labelledby": S,
    hint: v,
    error: a,
    required: E
  }, /* @__PURE__ */ n.createElement(V, {
    spacing: 1
  }, f && /* @__PURE__ */ n.createElement(Q, {
    action: x
  }, f), /* @__PURE__ */ n.createElement(V, {
    horizontal: !0,
    spacing: 2
  }, /* @__PURE__ */ n.createElement(K, y({
    "data-testid": "datetimepicker-date",
    name: k,
    ariaLabel: f || t,
    error: typeof a == "string",
    selectedDate: s,
    selectedDateLabel: (e) => `Date picker, current is ${e}`,
    onChange: R,
    required: E,
    size: $,
    onClear: T && z,
    clearLabel: r,
    disabled: i
  }, u)), /* @__PURE__ */ n.createElement(N, {
    "data-testid": "datetimepicker-time",
    size: $,
    "aria-label": f || t,
    error: typeof a == "string",
    value: D,
    onChange: j,
    onClear: T && A,
    clearLabel: r,
    required: E,
    selectButtonTitle: C,
    disabled: i,
    step: L
  })), /* @__PURE__ */ n.createElement(U, null), /* @__PURE__ */ n.createElement(W, {
    id: B
  })));
};
b.defaultProps = X;
b.propTypes = Y;
export {
  b as DateTimePicker
};
